<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Debug|AnyCPU">
      <Configuration>Debug</Configuration>
      <Platform>AnyCPU</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|AnyCPU">
      <Configuration>Release</Configuration>
      <Platform>AnyCPU</Platform>
    </ProjectConfiguration>
  </ItemGroup>

  <ItemGroup>
    <!-- capabilities needed for integration with NuGet -->
    <ProjectCapability Include="UserSourceItems" />
    <ProjectCapability Include="DeclaredSourceItems" />
    <ProjectCapability Include="AssemblyReferences" />
    <!-- other capabilites -->
    <ProjectCapability Include="QSharpProject" />
    <ProjectCapability Include="ReferencesFolder" />
    <ProjectCapability Include="ProjectReferences" />
    <ProjectCapability Include="PackageReferences" />
    <!--ProjectCapability Include="SDKReferences" /-->
    <ProjectCapability Include="ReferenceManagerProjects" />
    <ProjectCapability Include="ReferenceManagerAssemblies" />
    <ProjectCapability Include="ReferenceManagerBrowse" />
    <ProjectCapability Include="UseFileGlobs" />
    <ProjectCapability Include="OpenProjectFile" />
    <ProjectCapability Include="HandlesOwnReload" />
    <ProjectCapability Include="ProjectConfigurationsDeclaredAsItems" />
  </ItemGroup>

  <!--see https://github.com/microsoft/VSProjectSystem/blob/master/doc/extensibility/adding_xaml_rules.md -->
  <ItemGroup>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\ProjectItemsSchema.xaml"/>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\ProjectReference.xaml">
      <Context>BrowseObject</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\ResolvedProjectReference.xaml">
      <Context>ProjectSubscriptionService;BrowseObject</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\Solution.xaml">
      <Context>Project</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\ProjectItem.xaml">
      <Context>File</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\SourceControl.xaml">
      <Context>Invisible</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\Folder.xaml">
      <Context>File;BrowseObject</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\Qsharp.xaml;">
      <Context>File;BrowseObject</Context>
    </PropertyPageSchema>
    <PropertyPageSchema Include="$(MSBuildThisFileDirectory)Rules\None.xaml;">
      <Context>File;BrowseObject</Context>
    </PropertyPageSchema>
  </ItemGroup>

  <Import Project="$(MSBuildProjectFullPath).user" Condition="Exists('$(MSBuildProjectFullPath).user')" />
  <!--Target Name="Build" />
  <Target Name="Rebuild" /-->


  <PropertyGroup>
    <AvailablePlatforms>Any CPU,x86,x64</AvailablePlatforms>
    <!--DefaultContentType>Content</DefaultContentType-->
  </PropertyGroup>

  <!--Import Project="$(MSBuildToolsPath)\Microsoft.Common.targets" /-->
  <!--
      MSBuildAllProjects is used to keep track of all projects the build depends on.
      We make all targets depending on it to make sure everything rebuilds.
  -->
  <PropertyGroup>
    <MSBuildAllProjects Condition=" '$(MSBuildVersion)' == '' Or '$(MSBuildVersion)' &lt; '16.0' ">$(MSBuildAllProjects);$(MSBuildProjectFullPath)</MSBuildAllProjects>
  </PropertyGroup>


  <PropertyGroup>
    <ResolveAssemblyReferencesDependsOn>
      $(ResolveAssemblyReferencesDependsOn);
      ResolvePackageReference
    </ResolveAssemblyReferencesDependsOn>
  </PropertyGroup>

  <Target Name="ResolveAssemblyReferences"
          Returns="@(ReferencePath)"
          DependsOnTargets="$(ResolveAssemblyReferencesDependsOn)">
    <ItemGroup>
      <ReferencePath Include="@(_ResolvedProjectReferencePaths)">
        <ProjectReferenceOriginalItemSpec>%(OriginalProjectReferenceItemSpec)</ProjectReferenceOriginalItemSpec>
      </ReferencePath>
    </ItemGroup>
  </Target>  
</Project>